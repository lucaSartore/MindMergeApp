import{r as v,f as c,y as te,z as ae,_ as M,A as H,B as se,o as u,c as i,a as e,C as K,t as _,b as k,w as y,D as ne,F as T,i as S,E as oe,v as B,p as Q,d as q,u as n,e as h,G as O,h as L,j as le,H as ue,n as D,I as ie,J as de,K as re,L as ce,M as pe,N as ke,O as ve,P as _e,Q as fe,T as me,R as ge,s as he,S as Ie}from"./index.8ae6e21e.js";const a=v({}),E=v([]);v({});async function we(){if(a.value==null||a.value.taskAssignees==null){assignees.value=[];return}let d=a.value.taskAssignees.map(async p=>{let l=await ae(p);return{id:p,name:l}});d=await Promise.all(d),E.value=d}async function w(d){if(d==null||c.current==null){a.value={};return}a.value=await te(d,c.current),await we()}const ye={class:"task-item"},Te={key:0},be={key:0},Ne={__name:"TreeMenu",props:{model:Object},setup(d){const p=d,l=v(!1),r=H(()=>p.model.childTasks&&p.model.childTasks.length),m=H(()=>a.value==null?!1:p.model.taskId===a.value.taskId);function b(){r.value&&(l.value=!l.value)}async function N(){await w(p.model.taskId)}return(C,A)=>{const I=se("TreeMenu",!0);return u(),i("li",null,[e("div",ye,[e("span",{class:K({selected:m.value}),onClick:N},_(d.model.taskName),3),e("span",{class:K([{selected:m.value},"toggle-icon"]),onClick:b},[r.value?(u(),i("span",Te,"["+_(l.value?"-":"+")+"]",1)):k("",!0)],2)]),r.value?y((u(),i("ul",be,[(u(!0),i(T,null,S(d.model.childTasks,x=>(u(),oe(I,{model:x},null,8,["model"]))),256))],512)),[[ne,l.value]]):k("",!0)])}}};var Ce=M(Ne,[["__scopeId","data-v-07d9e7dd"]]);const G=d=>(Q("data-v-54d454b4"),d=d(),q(),d),Ae=G(()=>e("i",{class:"fas fa-pencil-alt"},null,-1)),xe=[Ae],Ue={key:0,class:"popup"},Se={class:"popup-content"},Fe=G(()=>e("br",null,null,-1)),$e={__name:"UpdateButton",props:{text:Object,argsForUpdateFunction:Object,updateFunction:Object,callbackAfterUpdate:Object},setup(d){const p=d;async function l(A){await p.updateFunction(A,p.argsForUpdateFunction),p.callbackAfterUpdate!=null&&await p.callbackAfterUpdate()}const r=v(!1),m=v("");function b(){m.value=p.text,r.value=!0}function N(){r.value=!1}async function C(){await l(m.value),r.value=!1}return(A,I)=>(u(),i(T,null,[e("button",{onClick:b,class:"edit-button"},xe),r.value?(u(),i("div",Ue,[e("div",Se,[y(e("textarea",{"onUpdate:modelValue":I[0]||(I[0]=x=>m.value=x)},null,512),[[B,m.value]]),Fe,e("button",{onClick:N},"Cancel"),e("button",{onClick:C},"Ok")])])):k("",!0)],64))}};var P=M($e,[["__scopeId","data-v-54d454b4"]]);const f=d=>(Q("data-v-3624e597"),d=d(),q(),d),Oe={class:"main-container"},ze=f(()=>e("h1",null,"Home Page",-1)),Ve=f(()=>e("br",null,null,-1)),Re={key:0},De={key:1,class:"content-wrapper"},Pe={class:"side-bar"},Be={class:"main-content"},Me=f(()=>e("br",null,null,-1)),je={key:0},We=f(()=>e("br",null,null,-1)),He={class:"task-status-container"},Ke=["value"],Le=f(()=>e("br",null,null,-1)),Qe={class:"task-note-container"},qe={class:"task-notes-label"},Ee={class:"task-notes-text"},Ge=f(()=>e("br",null,null,-1)),Je={class:"manage-task-notes"},Ye=["value"],Xe=f(()=>e("br",null,null,-1)),Ze={key:0},et={key:0},tt={class:"task-note-container"},at={class:"task-notes-label"},st={class:"task-notes-text"},nt={class:"last-updated"},ot={class:"manage-task-assignees"},lt={key:0,class:"popup"},ut={class:"popup-content"},it=f(()=>e("h2",null,"Add User",-1)),dt=f(()=>e("label",{for:"user-name"},"User Name:",-1)),rt={key:0,class:"error"},ct={key:1,class:"popup"},pt={class:"popup-content"},kt=f(()=>e("h2",null,"Automatic Report",-1)),vt=f(()=>e("label",{for:"question"},"Question about the task",-1)),_t={class:"assignee-list-container"},ft={class:"assignee-list"},mt=["onClick"],gt={__name:"HomePageView",setup(d){var p=v([{}]),l=v(null);async function r(){var g,R;if(c.current==null)return;let o=await ue(c.current,D.id);if(o==null)return;let t=(R=(g=a.value)==null?void 0:g.taskId)!=null?R:void 0,s=JSON.stringify(o).replace(" ","").includes('"taskId":'+t);o.length>0?s?await w(t):await w(o[0].taskId):await w(void 0),a.value!=null&&a.value.taskNotes!=null&&l.value==null&&(l.value=a.value.taskNotes.length>0?a.value.taskNotes[0].noteId:null),p.value=o}async function m(o){await ie(c.current,a.value.taskId,o)}async function b(o){await de(c.current,a.value.taskId,l.value,o)}async function N(){await re(c.current,a.value.taskId,a.value.taskStatus),await r()}async function C(o,t){let s=c.current,g=D.id;await ce(s,o,[g],g,t),await r()}async function A(){let o=c.current,t=a.value.taskId;await pe(o,t),await r()}async function I(){let o=c.current,t=a.value.taskId,s=l.value;await ke(o,t,s),await r();let g=a.value.taskNotes.length>0?a.value.taskNotes[0].noteId:null;l.value=g}async function x(){let o=c.current,t=a.value.taskId,s=await ve(o,t);l.value=s,await r()}async function J(){let o=c.current,t=a.value.taskId,s=D.id;await _e(o,t,s,$.value),W(),alert("You will receive an email soon")}async function Y(o){let t=c.current,s=a.value.taskId;await ge(t,s,o),await w(a.value.taskId)}const z=v(!1),V=v(!1),U=v(""),F=v(""),$=v("");async function X(o){let t=await he(o);return t.statusCode===404?(U.value="User not found",!1):(t=await Ie(c.current,a.value.taskId,t.payload),t.statusCode===404?(U.value="User not found in organization",!1):!0)}async function Z(){await X(F.value)&&(j(),w(a.value.taskId))}function j(){z.value=!1,F.value="",U.value=""}function W(){V.value=!1,$.value=""}async function ee(o){let t=c.current,s=a.value.taskId;await fe(t,s,o)}return r(),(o,t)=>(u(),i("main",Oe,[ze,Ve,n(c).current==null?(u(),i("div",Re,' You need to select/create an organization from the page "organization" before you can see the details in this page')):k("",!0),n(c).current!=null?(u(),i("div",De,[e("div",Pe,[n(a).taskName!=null?(u(),i("button",{key:0,onClick:t[0]||(t[0]=s=>C("New Child Task",n(a).taskId))},"Add child task ")):k("",!0),e("button",{onClick:t[1]||(t[1]=s=>C("New Root Task",null))},"Add root task "),n(a).taskName!=null?(u(),i("button",{key:1,onClick:A},"Delete selected task")):k("",!0),(u(!0),i(T,null,S(n(p),s=>(u(),i("ul",null,[O(Ce,{class:"item",model:s},null,8,["model"])]))),256))]),e("div",Be,[Me,n(a).taskName!=null?(u(),i("div",je,[e("h1",null,[h(" Current task: "+_(n(a).taskName)+" ",1),O(P,{text:n(a).taskName,updateFunction:m,argsForUpdateFunction:null,callbackAfterUpdate:r},null,8,["text"])]),We,e("div",He,[e("h3",null,[h(" Task Status: "),y(e("select",{id:"statusSelector","onUpdate:modelValue":t[2]||(t[2]=s=>n(a).taskStatus=s),style:{width:"200px"},onChange:t[3]||(t[3]=s=>N())},[(u(),i(T,null,S(6,s=>e("option",{key:s,value:s},_(Object.keys(n(me).TaskStatus)[s]),9,Ke)),64))],544),[[L,n(a).taskStatus]])]),e("button",{onClick:t[4]||(t[4]=s=>V.value=!0)},"Get automatic Report")]),Le,e("div",Qe,[e("p",qe,[h(" Task Description "),O(P,{text:n(a).taskDescription,updateFunction:ee,argsForUpdateFunction:null,callbackAfterUpdate:r},null,8,["text"])]),e("pre",Ee,_(n(a).taskDescription),1)]),Ge,e("div",Je,[e("h2",null,[h("Task notes "),e("button",{onClick:t[5]||(t[5]=s=>x())},"create New Note"),e("button",{onClick:t[6]||(t[6]=s=>I())},"delete selected Note"),e("h3",null,[h(" Select note: "),y(e("select",{id:"noteSelector","onUpdate:modelValue":t[7]||(t[7]=s=>le(l)?l.value=s:l=s),style:{width:"200px"}},[(u(!0),i(T,null,S(n(a).taskNotes,s=>(u(),i("option",{key:s.noteId,value:s.noteId},_(s.noteId),9,Ye))),128))],512),[[L,n(l)]])])]),Xe,n(a).taskNotes[n(l)-1]!=null?(u(),i("div",Ze,[n(a).taskNotes[n(l)-1]!=null?(u(),i("div",et,[e("div",tt,[e("p",at,[h("Note "+_(n(l))+" ",1),O(P,{text:n(a).taskNotes[n(l)-1].notes,updateFunction:b,argsForUpdateFunction:null,callbackAfterUpdate:r},null,8,["text"])]),e("pre",st,_(n(a).taskNotes[n(l)-1].notes),1),e("p",nt,"Last updated: "+_(n(a).taskNotes[n(l)-1].date),1)])])):k("",!0)])):k("",!0)]),e("div",ot,[z.value?(u(),i("div",lt,[e("div",ut,[it,dt,y(e("input",{id:"user-name","onUpdate:modelValue":t[8]||(t[8]=s=>F.value=s),type:"text"},null,512),[[B,F.value]]),e("button",{onClick:Z},"OK"),e("button",{onClick:j},"Cancel"),U.value?(u(),i("p",rt,_(U.value),1)):k("",!0)])])):k("",!0),V.value?(u(),i("div",ct,[e("div",pt,[kt,vt,y(e("input",{id:"question","onUpdate:modelValue":t[9]||(t[9]=s=>$.value=s),type:"text"},null,512),[[B,$.value]]),e("button",{onClick:J},"OK"),e("button",{onClick:W},"Cancel")])])):k("",!0),e("h2",null,[h("Assignees "),e("button",{onClick:t[10]||(t[10]=s=>z.value=!0)},"Add assignee ")]),e("ul",_t,[(u(!0),i(T,null,S(n(E),s=>(u(),i("li",ft,[h(_(s.name)+" ",1),e("button",{onClick:g=>Y(s.id)},"Remove",8,mt)]))),256))])])])):k("",!0)])])):k("",!0)]))}};var It=M(gt,[["__scopeId","data-v-3624e597"]]);export{It as default};
